<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.0.4 (457911)"/><meta name="author" content="guoqzuo@gmail.com"/><meta name="created" content="2019-08-15 03:59:50 +0000"/><meta name="source" content="desktop.win"/><meta name="source-application" content="yinxiang.win32"/><meta name="updated" content="2019-08-19 12:33:47 +0000"/><title>IBD饮食日记-小程序创建迭代历程</title></head><body><div><span style="font-size: 14pt; font-weight: bold;">2019/08/18 开源v1.1.0版本到github</span><br/></div><div><span style="font-size: 14pt; font-weight: bold;"><br/></span></div><div><span style="font-size: 14px;">后续的迭代更新，原则上还是会开源</span></div><div><span style="font-size: 14px;"><br/></span></div><div><span style="font-size: 14px;"><br/></span></div><div><span style="font-size: 14px;"><br/></span></div><div><span style="font-size: 14px;"><br/></span></div><div><span style="font-size: 14pt; font-weight: bold;">2019/08/16 21:35 完成v1.1.0版本</span><br/></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>v1.1.0(2019-08-16 21:35)</div><div>  1. A 新增 iPad UI适配，将字体rpx，以及固定高度rpx改为px，优化大屏显示效果。iphone 5显示优化</div><div>  2. A 新增下拉刷新，弥补多端同步时，一端已缓存数据，另一端当天数据变更后，缓存的一端不会实时刷新的不足。</div><div>  3. A 新增网络异常提示，当检测没网络时，提示异常，但如果连接了wifi，但如果wifi也没网是无法检测的，只能等超时提示异常</div><div><br/></div></div><div><br/></div><div>提交审核后，不到20分钟就审核通过了</div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;"><br/></span></div><div><span style="font-size: 14pt; font-weight: bold;">2019/08/16 下午 v1.0.1问题总结</span></div><div><br/></div><div><span style="color: rgb(65, 173, 28);">P1 缓存问题导致多端同步会有点问题。如果ipad有缓存。小程序新增或修改后，ipad不会刷新，加下拉刷新功能有必要</span></div><div><span style="color: rgb(65, 173, 28);">P3 ipad 适配，目前显示效果有些大小不一的情况</span></div><div><br/></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">貌似不好解决</span>  P3 日期滑动优化，小程序顶部右滑会关闭小程序。单手操作时容易误碰，中间部分滑动增强体验</div><div><br/></div><div><span style="text-decoration: line-through;">P4 新增记录时，缓存，草稿问题。当是新增进入时，先看缓存是否有内容。如果有内容，从缓存加载内容。新增成功后清除缓存</span></div><div><span style="text-decoration: line-through;">防止下次正常新增时，还有原先的内容</span><span style="background-color: rgb(255, 250, 165); text-decoration: line-through;-evernote-highlight:true;"> 可有可无，用处不大</span></div><div><br/></div><div><span style="color: rgb(65, 173, 28);">P3 网络异常提示，只有网络ok才会去发送请求，否则提示网络异常</span></div><div><span style="color: rgb(65, 173, 28);"><br/></span></div><div><span style="color: rgb(65, 173, 28);"><br/></span></div><div><span style="color: rgb(65, 173, 28);"><br/></span></div><div><span style="color: rgb(65, 173, 28);"><br/></span></div><div><span style="font-size: 14pt; font-weight: bold;">2019/08/16 凌晨 00:27 完成v1.0.1版本</span></div><div><br/></div><div><span style="font-size: 10pt;">提交新版本v1.0.1，待审核</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>v1.0.1(2019-08/16)</div><div>  1. A 新增 缓存数据，减少请求操作</div><div>  2. F 修复 修改记录时文案依旧是'新增记录'的问题，改为'修改记录'</div><div>  3. F 修复 饮食记录里按新增顺序排序，而不是按时间排序</div><div>  4. O 优化 饮食记录列表的key原来为时间，考虑后时间可以重复，key改为_id</div><div>  5. O 优化 提取request请求通用代码封装，开启增强编译，使用async await写法替换promise.then</div><div>  6. O 优化 首页每次onshow都会刷新数据的问题，仅在日期变更或新增、修改、删除记录返回页面时执行请求数据操作</div><div>  7. O 优化 暂无记录时，'添加一条记录' 的点击范围增大</div><div><br/></div></div><div><br/></div><div>凌晨00:30左右提交审核后，当天晚上18:30左右审核通过</div><div><span style="font-size: 14pt; font-weight: bold;"><br/></span></div><div><span style="font-size: 14pt; font-weight: bold;"><br/></span></div><div><span style="font-size: 14pt; font-weight: bold;"><br/></span></div><div><span style="font-size: 14pt; font-weight: bold;">2019/08/15 下午  </span><span style="font-size: 14pt; font-weight: bold;">v1.0.0问题总结：</span></div><div><br/></div><div><span style="color: rgb(65, 173, 28);">P1.1修改页面显示的依旧是新增记录，需要修改为修改记录</span></div><div><br/></div><div>P3现在是点击后进入修改删除页面 可以优化为左滑修改删除的功能</div><div><br/></div><div><span style="color: rgb(65, 173, 28);">P1.2.当初在修改记录后，会返回首页，需要刷新数据，但不好监听修改完成后的状态。就在onshow函数里实现了刷新。不好的效果是，每次开始进入时，会执行两次拉取结果。且每次重新进入首页都会去请求刷新，需要改为，新增/修改/删除后返回首页时刷新。其他非必要情况不要刷新。</span></div><div><span style="color: rgb(65, 173, 28);">可以利用一个数组存储执函数，新增/修改/删除成功后，push进数组，onshow时，如果数组里面有值pop函数再执行。</span></div><div><br/></div><div><span style="color: rgb(65, 173, 28);">P1.3缓存处理，每次点击新的日期，或点击新的天数时，需要请求数据，请求数据前，看是否有缓存，如果有调用缓存，如果没有就存一个缓存，减少请求云函数的频率，节约资源。</span></div><div><span style="color: rgb(65, 173, 28);">修改/删除/新增后的拉取必须重新拉取。刷新对应缓存，其他情况都必须先看是否有缓存</span></div><div><span style="color: rgb(65, 173, 28);">再加上一个下拉刷新每次请求新数据就完美了。</span></div><div><br/></div><div><span style="color: rgb(65, 173, 28); text-decoration: line-through;">P1.4 新增时如果时间在库里已存在，需要换回失败，修改时，时间不能修改。防止 VM1359:1 Do not set same key \"</span><span style="text-decoration: line-through;">21:51</span><span style="color: rgb(65, 173, 28); text-decoration: line-through;">\" in wx:key.</span><span style="color: rgb(65, 173, 28);">  改为key为_id，修改时可以改时间。</span></div><div><br/></div><div><span style="color: rgb(65, 173, 28);">P1.5时间的排序问题，00:00 - 24:00 按顺序排序</span></div><div><br/></div><div>P2 v1.1.0 迭代计划</div><div>关于每日状态功能的添加，完善。</div><div>关于分享给其他人功能的开发</div><div><br/></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;"><br/></span></div><div><span style="font-size: 14pt; font-weight: bold;">2019/08/15 凌晨</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 14pt; font-family: &quot;Helvetica Neue&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, 黑体, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 01:43 </span><span style="font-size: 14pt; font-family: &quot;Helvetica Neue&quot;; font-weight: bold;">完成第一个基础版本v1.0.0</span></div><div><br/></div><div>已提交审核，完成周期大概3-4天左右，小程序云开发还是比较方便的不用自己搭服务器弄数据库。</div><div><br/></div><div><img src="IBD%E9%A5%AE%E9%A3%9F%E6%97%A5%E8%AE%B0-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%9B%E5%BB%BA%E8%BF%AD%E4%BB%A3%E5%8E%86%E7%A8%8B.resources/A49D4030-A8BF-4DD3-99C2-2192820E1F2B.png" height="384" width="1023"/></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>v1.0.0 (2019/08/15)</div><div>  A 新增 基础功能，初始化项目</div></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;">凌晨01:45 提交审核，到第二天00:30左右提交新版本审核时还没审核通过，直接撤回</font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><br/></font></div><div><span style="font-size: 14pt; font-weight: bold;"><br/></span></div><div><span style="font-size: 14pt; font-weight: bold;">19/08/12 创建小程序云开发项目，开始开发</span></div><div><br/></div><div>用gitlab的私人仓库，开始写代码，画UI。下午15：30 出去看了场电影 哪吒之魔童降世。</div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;"><br/></span></div><div><span style="font-size: 14pt; font-weight: bold;"><br/></span></div><div><span style="font-size: 14pt; font-weight: bold;">19/08/11 晚上开始画 饮食日记 小程序原型图</span></div><div><br/></div><div>用GoodNotes，还挺方便的，关键是可以躺床上用ipad边想边画</div><div><br/></div><div><img src="IBD%E9%A5%AE%E9%A3%9F%E6%97%A5%E8%AE%B0-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%9B%E5%BB%BA%E8%BF%AD%E4%BB%A3%E5%8E%86%E7%A8%8B.resources/5367A538-79A7-4744-9B26-A1AEFB216799.png" height="763" width="570"/></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;"><br/></span></div><div><span style="font-size: 14pt; font-weight: bold;"><br/></span></div><div><span style="font-size: 14pt; font-weight: bold;">19/08/10 注册 "IBD饮食日记" 小程序</span></div><div><br/></div><div><span style="font-size: 10pt;">饮食日记 这个名称由于公众号已用，无法注册，于是就注册了 IBD饮食日记。简称可以测试为饮食日记</span></div><div><span style="font-size: 14pt; font-weight: bold;"><br/></span></div><div><span style="font-size: 14pt; font-weight: bold;"><br/></span></div><div><span style="font-size: 14pt; font-weight: bold;">19/08/01 开始写饮食日记</span></div><div><span style="font-size: 14pt; font-weight: bold;"><br/></span></div><div>在GoodNotes上自己画表格，用apple pencil做饮食记录</div><div><br/></div><div><img src="IBD%E9%A5%AE%E9%A3%9F%E6%97%A5%E8%AE%B0-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%9B%E5%BB%BA%E8%BF%AD%E4%BB%A3%E5%8E%86%E7%A8%8B.resources/4E63FB78-FFBA-4517-A815-7B255774A211.png" height="628" width="513"/></div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">19/07/31 初识</span><span style="font-size: 14pt; font-weight: bold;">饮食日记</span></div><div><font style="font-size: 10pt;"><br/></font></div><div><span style="font-size: 10pt;">下午参加了深圳市人民医院 肛肠外科 IBD患教活动，</span>严松医生分享了炎症性肠病与饮食。吃的东西确实对病情有很大的关系。建议写饮食日记，观察吃东西后的症状。如果吃了某些东西导致腹泻或其他不良反应，下次就注意不要吃。</div><div><img src="IBD%E9%A5%AE%E9%A3%9F%E6%97%A5%E8%AE%B0-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%9B%E5%BB%BA%E8%BF%AD%E4%BB%A3%E5%8E%86%E7%A8%8B.resources/E86D659C-7D91-4848-AFFB-F535D20B9050.png" height="305" width="400"/><br/></div><div><br/></div><div><span style="font-size: 14pt;"><br/></span></div><div/><div><span style="font-size: 18px;"><b><br/></b></span></div><div><br/></div><div><br/></div><div><span style="font-size: 18px;"><b><br/></b></span></div><div><font style="font-size: 14pt;"><br/></font></div><div><span style="font-size: 18px;"><b><br/></b></span></div><div><br/></div><div><br/></div><div><span style="font-size: 18px;"><b><br/></b></span></div><div><font style="font-size: 14pt;"><br/></font></div><div><span style="font-size: 18px;"><b><br/></b></span></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;"><br/></span></div><div><span style="font-size: 14pt; font-weight: bold;"><br/></span></div><div><br/></div><div><br/></div></body></html>